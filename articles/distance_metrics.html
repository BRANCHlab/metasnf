<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Distance Metrics • metasnf</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Distance Metrics">
<meta name="description" content="Vary distance metrics to expand or refine the space of generated cluster solutions.
">
<meta property="og:description" content="Vary distance metrics to expand or refine the space of generated cluster solutions.
">
<meta name="google-site-verification" content="Xzz1SIDqvPwru_mXKCXAkX2pNfOz5PO_QO02QG98tZI">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">metasnf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/a_simple_example.html">A Simple Example</a></li>
    <li><a class="dropdown-item" href="../articles/a_complete_example.html">A Complete Example</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Distance Metrics</h1>
            
      

      <div class="d-none name"><code>distance_metrics.Rmd</code></div>
    </div>

    
    
<style>
div.aside { background-color:#fff2e6; }
</style>
<p>Download a copy of the vignette to follow along here: <a href="https://raw.githubusercontent.com/BRANCHlab/metasnf/main/vignettes/distance_metrics.Rmd" class="external-link">distance_metrics.Rmd</a></p>
<div class="section level2">
<h2 id="the-distance_metrics_list">The distance_metrics_list<a class="anchor" aria-label="anchor" href="#the-distance_metrics_list"></a>
</h2>
<p>metaSNF enables users to customize what distance metrics are used in
the SNF pipeline. All information about distance metrics are stored in a
<code>distance_metrics_list</code> object.</p>
<p>By default, <code>batch_snf</code> will create its own
<code>distance_metrics_list</code> by calling the
<code>generate_distance_metrics_list</code> function with no additional
arguments.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://branchlab.github.io/metasnf/">metasnf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">distance_metrics_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_distance_metrics_list.html">generate_distance_metrics_list</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The list is a list of functions (<code><a href="../reference/euclidean_distance.html">euclidean_distance()</a></code>
and <code><a href="../reference/gower_distance.html">gower_distance()</a></code>), and printing them out directly can
be messy. The <code><a href="../reference/summarize_dml.html">summarize_dml()</a></code> function prints the object
with a nicer format.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/summarize_dml.html">summarize_dml</a></span><span class="op">(</span><span class="va">distance_metrics_list</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Continuous distances:</span></span>
<span><span class="co">#&gt; 1. euclidean_distance</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Discrete distances:</span></span>
<span><span class="co">#&gt; 1. euclidean_distance</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Ordinal distances:</span></span>
<span><span class="co">#&gt; 1. euclidean_distance</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Categorical distances:</span></span>
<span><span class="co">#&gt; 1. gower_distance</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Mixed distances:</span></span>
<span><span class="co">#&gt; 1. gower_distance</span></span></code></pre></div>
<p>These lists must always contain at least 1 distance metric for each
of the 5 recognized types of features: continuous, discrete, ordinal,
categorical, and mixed (any combination of the previous four).</p>
<p>By default, continuous, discrete, and ordinal data are converted to
distance matrices using simple Euclidean distance. Categorical and mixed
data are handled using Gower’s formula as implemented by the cluster
package (see <code><a href="https://rdrr.io/pkg/cluster/man/daisy.html" class="external-link">?cluster::daisy</a></code>).</p>
</div>
<div class="section level2">
<h2 id="how-the-distance_metrics_list-is-used">How the distance_metrics_list is used<a class="anchor" aria-label="anchor" href="#how-the-distance_metrics_list-is-used"></a>
</h2>
<p>To show how the distance_metrics_list is used, we’ll start by
extending our distance_metrics_list beyond just the default options.
metaSNF provides a Euclidean distance function that applies standard
normalization first, <code><a href="../reference/sn_euclidean_distance.html">sn_euclidean_distance()</a></code> (a wrapper
around <code><a href="https://rdrr.io/pkg/SNFtool/man/standardNormalization.html" class="external-link">SNFtool::standardNormalization</a></code> +
<code><a href="https://rdrr.io/r/stats/dist.html" class="external-link">stats::dist</a></code>). Here’s how we can create a custom
distance_metrics_list that includes this metric for continuous and
discrete features.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_distance_metrics</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_distance_metrics_list.html">generate_distance_metrics_list</a></span><span class="op">(</span></span>
<span>    continuous_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"standard_norm_euclidean"</span> <span class="op">=</span> <span class="va">sn_euclidean_distance</span></span>
<span>    <span class="op">)</span>,</span>
<span>    discrete_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"standard_norm_euclidean"</span> <span class="op">=</span> <span class="va">sn_euclidean_distance</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/summarize_dml.html">summarize_dml</a></span><span class="op">(</span><span class="va">my_distance_metrics</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Continuous distances:</span></span>
<span><span class="co">#&gt; 1. euclidean_distance </span></span>
<span><span class="co">#&gt; 2. standard_norm_euclidean</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Discrete distances:</span></span>
<span><span class="co">#&gt; 1. euclidean_distance </span></span>
<span><span class="co">#&gt; 2. standard_norm_euclidean</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Ordinal distances:</span></span>
<span><span class="co">#&gt; 1. euclidean_distance</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Categorical distances:</span></span>
<span><span class="co">#&gt; 1. gower_distance</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Mixed distances:</span></span>
<span><span class="co">#&gt; 1. gower_distance</span></span></code></pre></div>
<p>Now, during settings_matrix generation, we can provide our
distance_metrics_list to ensure our new distance metrics will be used on
some of our SNF runs.</p>
<p>Before making the settings_matrix, we’ll quickly need to setup some
data (as was done in <a href="https://branchlab.github.io/metasnf/articles/a_simple_example.html">A
Simple Example</a>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">SNFtool</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Data1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Data2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Data1</span><span class="op">$</span><span class="st">"patient_id"</span> <span class="op">&lt;-</span> <span class="fl">101</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">Data1</span><span class="op">)</span> <span class="op">+</span> <span class="fl">100</span><span class="op">)</span> <span class="co"># nolint</span></span>
<span><span class="va">Data2</span><span class="op">$</span><span class="st">"patient_id"</span> <span class="op">&lt;-</span> <span class="fl">101</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">Data2</span><span class="op">)</span> <span class="op">+</span> <span class="fl">100</span><span class="op">)</span> <span class="co"># nolint</span></span>
<span></span>
<span><span class="va">data_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_data_list.html">generate_data_list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">Data1</span>, <span class="st">"genes_1_and_2_exp"</span>, <span class="st">"gene_expression"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">Data2</span>, <span class="st">"genes_1_and_2_meth"</span>, <span class="st">"gene_methylation"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>    uid <span class="op">=</span> <span class="st">"patient_id"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>And then the settings_matrix can be generated:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    distance_metrics_list <span class="op">=</span> <span class="va">my_distance_metrics</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># showing just the columns that are related to distances</span></span>
<span><span class="va">settings_matrix</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></span><span class="op">(</span><span class="st">"dist"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    cont_dist disc_dist ord_dist cat_dist mix_dist</span></span>
<span><span class="co">#&gt; 1          2         2        1        1        1</span></span>
<span><span class="co">#&gt; 2          1         1        1        1        1</span></span>
<span><span class="co">#&gt; 3          2         2        1        1        1</span></span>
<span><span class="co">#&gt; 4          2         1        1        1        1</span></span>
<span><span class="co">#&gt; 5          1         2        1        1        1</span></span>
<span><span class="co">#&gt; 6          1         1        1        1        1</span></span>
<span><span class="co">#&gt; 7          2         1        1        1        1</span></span>
<span><span class="co">#&gt; 8          2         2        1        1        1</span></span>
<span><span class="co">#&gt; 9          1         1        1        1        1</span></span>
<span><span class="co">#&gt; 10         1         2        1        1        1</span></span></code></pre></div>
<p>The continuous and discrete distance metrics values randomly
fluctuate between 1 and 2, where 1 means that the first metric
(<code><a href="../reference/euclidean_distance.html">euclidean_distance()</a></code>) will be used and 2 means that the
second metric (<code>sn_euclidean_distance</code>) will be used.</p>
<p>It’s important to note that the settings_matrix itself <strong>does
not store the distance metrics</strong>, just the pointers to which
position metric in the distance_metrics_list should be used for that SNF
run. Because of that, you’ll need to supply the distance_metrics_list
once again when calling <code><a href="../reference/batch_snf.html">batch_snf()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">solutions_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/batch_snf.html">batch_snf</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    <span class="va">settings_matrix</span>,</span>
<span>    distance_metrics_list <span class="op">=</span> <span class="va">my_distance_metrics</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="removing-the-default-distance_metrics">Removing the default distance_metrics<a class="anchor" aria-label="anchor" href="#removing-the-default-distance_metrics"></a>
</h2>
<p>There are two ways to avoid using the default distance metrics if you
don’t want to ever use them.</p>
<p>The first way is to use the <code>keep_defaults</code> parameter in
<code><a href="../reference/generate_distance_metrics_list.html">generate_distance_metrics_list()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">no_default_metrics</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_distance_metrics_list.html">generate_distance_metrics_list</a></span><span class="op">(</span></span>
<span>    continuous_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"standard_norm_euclidean"</span> <span class="op">=</span> <span class="va">sn_euclidean_distance</span></span>
<span>    <span class="op">)</span>,</span>
<span>    discrete_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"standard_norm_euclidean"</span> <span class="op">=</span> <span class="va">sn_euclidean_distance</span></span>
<span>    <span class="op">)</span>,</span>
<span>    ordinal_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"standard_norm_euclidean"</span> <span class="op">=</span> <span class="va">sn_euclidean_distance</span></span>
<span>    <span class="op">)</span>,</span>
<span>    categorical_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"standard_norm_euclidean"</span> <span class="op">=</span> <span class="va">gower_distance</span></span>
<span>    <span class="op">)</span>,</span>
<span>    mixed_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"standard_norm_euclidean"</span> <span class="op">=</span> <span class="va">gower_distance</span></span>
<span>    <span class="op">)</span>,</span>
<span>    keep_defaults <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/summarize_dml.html">summarize_dml</a></span><span class="op">(</span><span class="va">no_default_metrics</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Continuous distances:</span></span>
<span><span class="co">#&gt; 1. standard_norm_euclidean</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Discrete distances:</span></span>
<span><span class="co">#&gt; 1. standard_norm_euclidean</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Ordinal distances:</span></span>
<span><span class="co">#&gt; 1. standard_norm_euclidean</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Categorical distances:</span></span>
<span><span class="co">#&gt; 1. standard_norm_euclidean</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Mixed distances:</span></span>
<span><span class="co">#&gt; 1. standard_norm_euclidean</span></span></code></pre></div>
<p>For this option, it is necessary to provide at least one distance
metric for every feature type. A distance_metrics_list cannot have any
of its feature types be completely empty (even if you have no data for
that feature type in the first place).</p>
<p>The second way is to explicitly specify which indices you want to
sample from during settings_matrix generation:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_distance_metrics</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_distance_metrics_list.html">generate_distance_metrics_list</a></span><span class="op">(</span></span>
<span>    continuous_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"standard_norm_euclidean"</span> <span class="op">=</span> <span class="va">sn_euclidean_distance</span>,</span>
<span>        <span class="st">"some_other_metric"</span> <span class="op">=</span> <span class="va">sn_euclidean_distance</span></span>
<span>    <span class="op">)</span>,</span>
<span>    discrete_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"standard_norm_euclidean"</span> <span class="op">=</span> <span class="va">sn_euclidean_distance</span>,</span>
<span>        <span class="st">"some_other_metric"</span> <span class="op">=</span> <span class="va">sn_euclidean_distance</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/summarize_dml.html">summarize_dml</a></span><span class="op">(</span><span class="va">my_distance_metrics</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Continuous distances:</span></span>
<span><span class="co">#&gt; 1. euclidean_distance </span></span>
<span><span class="co">#&gt; 2. standard_norm_euclidean </span></span>
<span><span class="co">#&gt; 3. some_other_metric</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Discrete distances:</span></span>
<span><span class="co">#&gt; 1. euclidean_distance </span></span>
<span><span class="co">#&gt; 2. standard_norm_euclidean </span></span>
<span><span class="co">#&gt; 3. some_other_metric</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Ordinal distances:</span></span>
<span><span class="co">#&gt; 1. euclidean_distance</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Categorical distances:</span></span>
<span><span class="co">#&gt; 1. gower_distance</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Mixed distances:</span></span>
<span><span class="co">#&gt; 1. gower_distance</span></span>
<span></span>
<span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    distance_metrics_list <span class="op">=</span> <span class="va">my_distance_metrics</span>,</span>
<span>    continuous_distances <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    discrete_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">settings_matrix</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></span><span class="op">(</span><span class="st">"dist"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    cont_dist disc_dist ord_dist cat_dist mix_dist</span></span>
<span><span class="co">#&gt; 1          1         2        1        1        1</span></span>
<span><span class="co">#&gt; 2          1         2        1        1        1</span></span>
<span><span class="co">#&gt; 3          1         3        1        1        1</span></span>
<span><span class="co">#&gt; 4          1         3        1        1        1</span></span>
<span><span class="co">#&gt; 5          1         3        1        1        1</span></span>
<span><span class="co">#&gt; 6          1         2        1        1        1</span></span>
<span><span class="co">#&gt; 7          1         3        1        1        1</span></span>
<span><span class="co">#&gt; 8          1         3        1        1        1</span></span>
<span><span class="co">#&gt; 9          1         2        1        1        1</span></span>
<span><span class="co">#&gt; 10         1         2        1        1        1</span></span></code></pre></div>
<p>The second option can be quite useful when paired with
<code><a href="../reference/add_settings_matrix_rows.html">add_settings_matrix_rows()</a></code>, enabling you to build up
distinct blocks of rows in the settings matrix that have different
combinations of distance metrics. This can save you the trouble of
needing to manage several distinct distance metrics lists or manage your
solution space over separate runs of <code>batch_snf</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    distance_metrics_list <span class="op">=</span> <span class="va">my_distance_metrics</span>,</span>
<span>    continuous_distances <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    discrete_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_settings_matrix_rows.html">add_settings_matrix_rows</a></span><span class="op">(</span></span>
<span>    <span class="va">settings_matrix</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    distance_metrics_list <span class="op">=</span> <span class="va">my_distance_metrics</span>,</span>
<span>    continuous_distances <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    discrete_distances <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">settings_matrix</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></span><span class="op">(</span><span class="st">"dist"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    cont_dist disc_dist ord_dist cat_dist mix_dist</span></span>
<span><span class="co">#&gt; 1          1         3        1        1        1</span></span>
<span><span class="co">#&gt; 2          1         2        1        1        1</span></span>
<span><span class="co">#&gt; 3          1         3        1        1        1</span></span>
<span><span class="co">#&gt; 4          1         3        1        1        1</span></span>
<span><span class="co">#&gt; 5          1         2        1        1        1</span></span>
<span><span class="co">#&gt; 6          1         2        1        1        1</span></span>
<span><span class="co">#&gt; 7          1         2        1        1        1</span></span>
<span><span class="co">#&gt; 8          1         2        1        1        1</span></span>
<span><span class="co">#&gt; 9          1         2        1        1        1</span></span>
<span><span class="co">#&gt; 10         1         2        1        1        1</span></span>
<span><span class="co">#&gt; 11         3         1        1        1        1</span></span>
<span><span class="co">#&gt; 12         3         1        1        1        1</span></span>
<span><span class="co">#&gt; 13         3         1        1        1        1</span></span>
<span><span class="co">#&gt; 14         3         1        1        1        1</span></span>
<span><span class="co">#&gt; 15         3         1        1        1        1</span></span>
<span><span class="co">#&gt; 16         3         1        1        1        1</span></span>
<span><span class="co">#&gt; 17         3         1        1        1        1</span></span>
<span><span class="co">#&gt; 18         3         1        1        1        1</span></span>
<span><span class="co">#&gt; 19         3         1        1        1        1</span></span>
<span><span class="co">#&gt; 20         3         1        1        1        1</span></span></code></pre></div>
<p>In rows 1 to 10, only continuous data will always be handled by the
first continuous distance metric while discrete data will be handled by
the second and third discrete distance metrics. In rows 11 to 20,
continuous data will always be handled by the third continuous distance
metric while discrete data will only be handled by the first distance
metric.</p>
</div>
<div class="section level2">
<h2 id="supplying-weights-to-distance-metrics">Supplying weights to distance metrics<a class="anchor" aria-label="anchor" href="#supplying-weights-to-distance-metrics"></a>
</h2>
<p>Some distance metric functions can accept weights. Usually, weights
will be applied by direct scaling of specified features. In some cases
(e.g. categorical distance metric functions), the way in which weights
are applied may be somewhat less intuitive. The bottom of this vignette
outlines the available distance metric functions grouped by whether or
not they accept weights. You can examine the documentation of those
weighted functions to learn more about how the weights you provide will
be used.</p>
<p>An important note on providing weights for a run of SNF is that the
specific form of the data may not be what you expect by the time it is
ready to be converted into a distance metric function. The “individual”
and “two-step” SNF schemes involve distance metrics only being applied
to the input dataframes in the <code>data_list</code> as they are. The
“domain” scheme, however, concatenates data within a domain before
converting that larger dataframe into a distance matrix. Anytime you
have more than one dataframe with the same domain label and you use the
domain SNF scheme, all the columns associated with that domain will be
in a single dataframe when the distance metric function is applied.</p>
<p>The first step in providing custom weights is to generate a
<code>weights_matrix</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weights_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_weights_matrix.html">generate_weights_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">weights_matrix</span></span>
<span><span class="co">#&gt;      V1 V2 V3 V4</span></span>
<span><span class="co">#&gt; [1,]  1  1  1  1</span></span></code></pre></div>
<p>By default, this function will return a dataframe containing all the
columns in the <code>data_list</code> and a single row of 1s, which are
the weights that will be used for a single run of SNF.</p>
<p>To actually use the matrix during SNF, you’ll need to make sure that
the number of rows in the weights matrix is the same as the number of
rows in your settings matrix.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    distance_metrics_list <span class="op">=</span> <span class="va">my_distance_metrics</span>,</span>
<span>    continuous_distances <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    discrete_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">weights_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_weights_matrix.html">generate_weights_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">settings_matrix</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">weights_matrix</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span></span>
<span><span class="co">#&gt;      V1 V2 V3 V4</span></span>
<span><span class="co">#&gt; [1,]  1  1  1  1</span></span>
<span><span class="co">#&gt; [2,]  1  1  1  1</span></span>
<span><span class="co">#&gt; [3,]  1  1  1  1</span></span>
<span><span class="co">#&gt; [4,]  1  1  1  1</span></span>
<span><span class="co">#&gt; [5,]  1  1  1  1</span></span>
<span></span>
<span><span class="va">solutions_matrix_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/batch_snf.html">batch_snf</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    <span class="va">settings_matrix</span>,</span>
<span>    distance_metrics_list <span class="op">=</span> <span class="va">my_distance_metrics</span>,</span>
<span>    weights_matrix <span class="op">=</span> <span class="va">weights_matrix</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Row: 1/10 | Time remaining: 3 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 2/10 | Time remaining: 3 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 3/10 | Time remaining: 3 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 4/10 | Time remaining: 2 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 5/10 | Time remaining: 2 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 6/10 | Time remaining: 2 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 7/10 | Time remaining: 1 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 8/10 | Time remaining: 1 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 9/10 | Time remaining: 0 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 10/10 | Time remaining: 0 seconds"</span></span>
<span><span class="co">#&gt; [1] "Total time taken: 4 seconds."</span></span>
<span></span>
<span><span class="va">solutions_matrix_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/batch_snf.html">batch_snf</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    <span class="va">settings_matrix</span>,</span>
<span>    distance_metrics_list <span class="op">=</span> <span class="va">my_distance_metrics</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Row: 1/10 | Time remaining: 3 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 2/10 | Time remaining: 3 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 3/10 | Time remaining: 3 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 4/10 | Time remaining: 2 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 5/10 | Time remaining: 2 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 6/10 | Time remaining: 2 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 7/10 | Time remaining: 1 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 8/10 | Time remaining: 1 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 9/10 | Time remaining: 0 seconds"</span></span>
<span><span class="co">#&gt; [1] "Row: 10/10 | Time remaining: 0 seconds"</span></span>
<span><span class="co">#&gt; [1] "Total time taken: 4 seconds."</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span></span>
<span>    <span class="va">solutions_matrix_1</span>,</span>
<span>    <span class="va">solutions_matrix_2</span></span>
<span><span class="op">)</span> <span class="co"># Try this on your machine - It'll evaluate to TRUE</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>A <code>weights_matrix</code> of all 1s (the default
<code>weights_matrix</code> used when you don’t supply one yourself)
’won’t actually do anything to the data. You can either replace the 1s
with your own weights that you’ve calculated outside of the package, or
use some random weights following a uniform or exponential
distribution.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weights_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_weights_matrix.html">generate_weights_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">settings_matrix</span><span class="op">)</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"uniform"</span> <span class="co"># or fill = "exponential"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The default metrics (simple Euclidean for continuous, discrete, and
ordinal data and Gower’s distance for categorical and mixed data) are
both capable of applying weights to data before distance matrix
generation.</p>
</div>
<div class="section level2">
<h2 id="custom-distance-metrics">Custom distance metrics<a class="anchor" aria-label="anchor" href="#custom-distance-metrics"></a>
</h2>
<p>The remainder of this vignette deals with supplying custom distance
metrics (including custom feature weighting). Making use of this
functionality will require a good understanding of working with
functions in R.</p>
<p>You can also supply your own custom distance metrics. Looking at the
code from one of the package-provided distance functions shows some of
the essential aspects of a well-formated distance function.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">euclidean_distance</span></span>
<span><span class="co">#&gt; function (df, weights_row) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     weights &lt;- format_weights_row(weights_row)</span></span>
<span><span class="co">#&gt;     weighted_df &lt;- as.matrix(df) %*% weights</span></span>
<span><span class="co">#&gt;     distance_matrix &lt;- as.matrix(stats::dist(weighted_df, method = "euclidean"))</span></span>
<span><span class="co">#&gt;     return(distance_matrix)</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x559128b9fba8&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: namespace:metasnf&gt;</span></span></code></pre></div>
<p>The function should accept two arguments: <code>df</code> and
<code>weights_row</code>, and only give one output,
<code>distance_matrix</code>. The function doesn’t actually need to make
use of those weights if you don’t want it to.</p>
<p>By the time your data reaches a distance metric function, it
(referred to as <code>df</code>) will always:</p>
<ol style="list-style-type: decimal">
<li>have no UID column</li>
<li>have at least one feature column</li>
<li>have no missing values</li>
<li>be a data.frame (not a tibble)</li>
</ol>
<p>The feature column names won’t be altered from the values they had
when they were loaded into the data_list.</p>
<p>For example, consider the <code>anxiety</code> raw data supplied by
metaSNF:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">anxiety</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">#&gt;   unique_id        cbcl_anxiety_r</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> NDAR_INV0567T2Y9              3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> NDAR_INV0GLZNC2W              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> NDAR_INV0IZ157F8             <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> NDAR_INV0J4PYA5F              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> NDAR_INV0OYE291Q              2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> NDAR_INV0SM1JLXQ              2</span></span></code></pre></div>
<p>Here’s how to make it look more like what the distance metric
functions will expect to see:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">processed_anxiety</span> <span class="op">&lt;-</span> <span class="va">anxiety</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># no NAs</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="st">"subjectkey"</span> <span class="op">=</span> <span class="st">"unique_id"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>row.names <span class="op">=</span> <span class="st">"subjectkey"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">processed_anxiety</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  cbcl_anxiety_r</span></span>
<span><span class="co">#&gt; NDAR_INV0567T2Y9              3</span></span>
<span><span class="co">#&gt; NDAR_INV0GLZNC2W              1</span></span>
<span><span class="co">#&gt; NDAR_INV0J4PYA5F              0</span></span>
<span><span class="co">#&gt; NDAR_INV0OYE291Q              2</span></span>
<span><span class="co">#&gt; NDAR_INV0SM1JLXQ              2</span></span>
<span><span class="co">#&gt; NDAR_INV0Z87UJDR              0</span></span></code></pre></div>
<p>If we want to have a distance metric that calculates Euclidean
distance, but also scales the resulting matrix down such that the
biggest allowed distance is a 1, it would look like this:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_scaled_euclidean</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">weights_row</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># this function won't apply the weights it is given</span></span>
<span>    <span class="va">distance_matrix</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/dist.html" class="external-link">dist</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"euclidean"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># make sure it's formatted as a matrix</span></span>
<span>    <span class="va">distance_matrix</span> <span class="op">&lt;-</span> <span class="va">distance_matrix</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">distance_matrix</span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">distance_matrix</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>You’ll need to be mindful of any edge cases that your function will
run into. For example, this function will fail if the pairwise distances
for all patients is 0 (a division by 0 will occur). If that specific
situation ever happens, there’s probably something quite wrong with the
data.</p>
<p>Once you’re happy that you distance function is working as you’d like
it to:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">my_scaled_euclidean</span><span class="op">(</span><span class="va">processed_anxiety</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt;                  NDAR_INV0567T2Y9 NDAR_INV0GLZNC2W NDAR_INV0J4PYA5F</span></span>
<span><span class="co">#&gt; NDAR_INV0567T2Y9              0.0              0.2              0.3</span></span>
<span><span class="co">#&gt; NDAR_INV0GLZNC2W              0.2              0.0              0.1</span></span>
<span><span class="co">#&gt; NDAR_INV0J4PYA5F              0.3              0.1              0.0</span></span>
<span><span class="co">#&gt; NDAR_INV0OYE291Q              0.1              0.1              0.2</span></span>
<span><span class="co">#&gt; NDAR_INV0SM1JLXQ              0.1              0.1              0.2</span></span>
<span><span class="co">#&gt;                  NDAR_INV0OYE291Q NDAR_INV0SM1JLXQ</span></span>
<span><span class="co">#&gt; NDAR_INV0567T2Y9              0.1              0.1</span></span>
<span><span class="co">#&gt; NDAR_INV0GLZNC2W              0.1              0.1</span></span>
<span><span class="co">#&gt; NDAR_INV0J4PYA5F              0.2              0.2</span></span>
<span><span class="co">#&gt; NDAR_INV0OYE291Q              0.0              0.0</span></span>
<span><span class="co">#&gt; NDAR_INV0SM1JLXQ              0.0              0.0</span></span></code></pre></div>
<p>You can load it into a custom distance_metrics_list:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_distance_metrics</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_distance_metrics_list.html">generate_distance_metrics_list</a></span><span class="op">(</span></span>
<span>    continuous_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"my_scaled_euclidean"</span> <span class="op">=</span> <span class="va">my_scaled_euclidean</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="requesting-metrics">Requesting metrics<a class="anchor" aria-label="anchor" href="#requesting-metrics"></a>
</h2>
<p>If there’s a metric you’d like to see added as a prewritten option
included in the package, feel free to post an issue or make a pull
request on the package’s GitHub.</p>
</div>
<div class="section level2">
<h2 id="list-of-prewritten-distance-metrics-functions">List of prewritten distance metrics functions<a class="anchor" aria-label="anchor" href="#list-of-prewritten-distance-metrics-functions"></a>
</h2>
<p>These metrics can be used as is. They are all capable of accepting
and applying custom weights provided by a
<code>weights_matrix</code>.</p>
<ul>
<li>
<code>euclidean_distance</code> (Euclidean distance)
<ul>
<li>applies to continuous, discrete, or ordinal data</li>
</ul>
</li>
<li>
<code>sn_euclidean_distance</code> (Standard normalized Euclidean
distance)
<ul>
<li>Standard normalize data, then use Euclidean distance</li>
<li>applies to continuous, discrete, or ordinal data</li>
</ul>
</li>
<li>
<code>gower_distance</code> (Gower’s distance)
<ul>
<li>applies to any data</li>
</ul>
</li>
<li>
<code>siw_euclidean_distance</code> (Squared (including weights)
Euclidean distance)
<ul>
<li>Apply weights to dataframe, then calculate Euclidean distance, then
square the results</li>
</ul>
</li>
<li>
<code>sew_euclidean_distance</code> (Squared (excluding weights)
Euclidean distance)
<ul>
<li>Apply <em>square root</em> of weights to dataframe, then calculate
Euclidean distance, then square the results</li>
</ul>
</li>
<li>
<code>hamming_distance</code> (Hamming distance)
<ul>
<li>Distance between patients is (1 * feature weight) summed over all
features</li>
</ul>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Wang, Bo, Aziz M. Mezlini, Feyyaz Demir, Marc Fiume, Zhuowen Tu,
Michael Brudno, Benjamin Haibe-Kains, and Anna Goldenberg. 2014.
“Similarity Network Fusion for Aggregating Data Types on a Genomic
Scale.” Nature Methods 11 (3): 333–37. <a href="https://doi.org/10.1038/nmeth.2810" class="external-link uri">https://doi.org/10.1038/nmeth.2810</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Prashanth Velayudhan, Xiaoqiao Xu, Prajkta Kallurkar, Ana Patricia Balbon, Maria T Secara, Adam Taback, Denise Sabac, Nicholas Chan, Shihao Ma, Anna Goldenberg, Bo Wang, Daniel Felsky, Stephanie H Ameis, Brian Cox, Colin Hawco, Lauren Erdman, Anne L Wheeler.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
