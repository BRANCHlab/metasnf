<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>The SNF Config • metasnf</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="The SNF Config">
<meta name="description" content="The object that controls all settings for converting data into a set of cluster solutions.
">
<meta property="og:description" content="The object that controls all settings for converting data into a set of cluster solutions.
">
<meta name="google-site-verification" content="Xzz1SIDqvPwru_mXKCXAkX2pNfOz5PO_QO02QG98tZI">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">metasnf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/a_simple_example.html">A Simple Example</a></li>
    <li><a class="dropdown-item" href="../articles/a_complete_example.html">A Complete Example</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BRANCHlab/metasnf/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>The SNF Config</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/BRANCHlab/metasnf/blob/main/vignettes/snf_config.Rmd" class="external-link"><code>vignettes/snf_config.Rmd</code></a></small>
      <div class="d-none name"><code>snf_config.Rmd</code></div>
    </div>

    
    
<p>Download a copy of the vignette to follow along here: <a href="https://raw.githubusercontent.com/BRANCHlab/metasnf/main/vignettes/snf_config.Rmd" class="external-link">snf_config.Rmd</a></p>
<p>This vignette outlines how to construct and use the SNF config, an
object storing all the settings and hyperparameters required to convert
data in a <code>data_list</code> class object into a space of cluster
solutions.</p>
<div class="section level2">
<h2 id="creating-a-default-snf-config">Creating a default SNF config<a class="anchor" aria-label="anchor" href="#creating-a-default-snf-config"></a>
</h2>
<p>The most minimal SNF config (<code>snf_config</code> class object)
can be obtained by providing a data list into the
<code><a href="../reference/snf_config.html">snf_config()</a></code> function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://branchlab.github.io/metasnf/">metasnf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">dl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/data_list.html">data_list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">cort_t</span>, <span class="st">"cortical_thickness"</span>, <span class="st">"neuroimaging"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">cort_sa</span>, <span class="st">"cortical_surface_area"</span>, <span class="st">"neuroimaging"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">subc_v</span>, <span class="st">"subcortical_volume"</span>, <span class="st">"neuroimaging"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">income</span>, <span class="st">"household_income"</span>, <span class="st">"demographics"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">pubertal</span>, <span class="st">"pubertal_status"</span>, <span class="st">"demographics"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>    uid <span class="op">=</span> <span class="st">"unique_id"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ℹ 175 observations dropped due to incomplete data.</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/snf_config.html">snf_config</a></span><span class="op">(</span><span class="va">dl</span>, n_solutions <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ℹ No distance functions specified. Using defaults.</span></span></code></pre>
<pre><code><span><span class="co">## ℹ No clustering functions specified. Using defaults.</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc</span></span></code></pre></div>
<pre><code><span><span class="co">## Settings Data Frame:</span></span>
<span><span class="co">##                            1    2    3    4    5</span></span>
<span><span class="co">## SNF hyperparameters:</span></span>
<span><span class="co">## alpha                    0.6  0.8  0.4  0.6  0.6</span></span>
<span><span class="co">## k                         39   75   51   77   25  </span></span>
<span><span class="co">## t                         20   20   20   20   20  </span></span>
<span><span class="co">## SNF scheme:</span></span>
<span><span class="co">##                            1    2    2    1    3  </span></span>
<span><span class="co">## Clustering functions:</span></span>
<span><span class="co">##                            2    2    2    2    2  </span></span>
<span><span class="co">## Distance functions:</span></span>
<span><span class="co">## CNT                        1    1    1    1    1  </span></span>
<span><span class="co">## DSC                        1    1    1    1    1  </span></span>
<span><span class="co">## ORD                        1    1    1    1    1  </span></span>
<span><span class="co">## CAT                        1    1    1    1    1  </span></span>
<span><span class="co">## MIX                        1    1    1    1    1  </span></span>
<span><span class="co">## Component dropout:</span></span>
<span><span class="co">## cortical_thickness         ✔    ✔    ✔    ✔    ✖  </span></span>
<span><span class="co">## cortical_surface_area      ✔    ✔    ✖    ✔    ✔  </span></span>
<span><span class="co">## subcortical_volume         ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## household_income           ✔    ✔    ✔    ✖    ✔  </span></span>
<span><span class="co">## pubertal_status            ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## Distance Functions List:</span></span>
<span><span class="co">## Continuous (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Discrete (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Ordinal (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Categorical (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Mixed (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Clustering Functions List:</span></span>
<span><span class="co">## [1] spectral_eigen</span></span>
<span><span class="co">## [2] spectral_rot</span></span>
<span><span class="co">## Weights Matrix:</span></span>
<span><span class="co">## Weights defined for 5 cluster solutions.</span></span>
<span><span class="co">## $ mrisdp_1 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## $ mrisdp_2 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## $ mrisdp_3 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## $ mrisdp_4 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## $ mrisdp_5 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## …and 329 more features.</span></span></code></pre>
<p>Similarity network fusion-based clustering pipelines require the
following steps:</p>
<ol style="list-style-type: decimal">
<li>Selecting a set of data frames to integrate</li>
<li>Converting those data frames into distance matrices using a distance
function</li>
<li>Converting those distance matrices to similarity matrices using the
<code>SNFtool</code> package’s <code><a href="https://rdrr.io/pkg/SNFtool/man/affinityMatrix.html" class="external-link">affinityMatrix()</a></code>
function</li>
<li>Integrating the similarity matrices into one final similarity matrix
using the <code>SNFtool</code> package’s <code><a href="https://rdrr.io/pkg/SNFtool/man/SNF.html" class="external-link">SNF()</a></code>
function</li>
<li>Converting that final similarity matrix into a cluster solution
using a clustering function</li>
</ol>
<p>The SNF config is made up of four parts that all address various
parts of that pipeline:</p>
<ol style="list-style-type: decimal">
<li>The <em>settings data frame</em> (class <code>settings_df</code>,
extends class <code>data.frame</code>), which contains information about
SNF-specific hyperparameters (step 4), which distance and clustering
functions will be used (steps 2 and 5), and if any components of the
data list (data frames) will be excluded on a particular run (step 1).
Each row of the data frame corresponds to a complete set of settings
that can yield a single cluster solution from the data list.</li>
<li>The <em>distance functions list</em> (class
<code>dist_fns_list</code>, extends class <code>list</code>), which
stores the actual distance functions that are referenced in the settings
data frame (step 2)</li>
<li>The <em>clustering functions list</em> (class
<code>clust_fns_list</code>, extends class <code>list</code>), which
similarly stores clustering functions (step 5)</li>
<li>The <em>weights matrix</em> (class <code>weights_matrix</code>,
extends classes <code>matrix</code>, <code>array</code>), which contains
feature weights to account for during the data to distance matrix
conversion step (step 2).</li>
</ol>
<div class="section level3">
<h3 id="the-settings-data-frame">The settings data frame<a class="anchor" aria-label="anchor" href="#the-settings-data-frame"></a>
</h3>
<p>You can view the settings data frame in closer detail as follows:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc</span><span class="op">$</span><span class="st">"settings_df"</span></span></code></pre></div>
<pre><code><span><span class="co">##                            1    2    3    4    5</span></span>
<span><span class="co">## SNF hyperparameters:</span></span>
<span><span class="co">## alpha                    0.6  0.8  0.4  0.6  0.6</span></span>
<span><span class="co">## k                         39   75   51   77   25  </span></span>
<span><span class="co">## t                         20   20   20   20   20  </span></span>
<span><span class="co">## SNF scheme:</span></span>
<span><span class="co">##                            1    2    2    1    3  </span></span>
<span><span class="co">## Clustering functions:</span></span>
<span><span class="co">##                            2    2    2    2    2  </span></span>
<span><span class="co">## Distance functions:</span></span>
<span><span class="co">## CNT                        1    1    1    1    1  </span></span>
<span><span class="co">## DSC                        1    1    1    1    1  </span></span>
<span><span class="co">## ORD                        1    1    1    1    1  </span></span>
<span><span class="co">## CAT                        1    1    1    1    1  </span></span>
<span><span class="co">## MIX                        1    1    1    1    1  </span></span>
<span><span class="co">## Component dropout:</span></span>
<span><span class="co">## cortical_thickness         ✔    ✔    ✔    ✔    ✖  </span></span>
<span><span class="co">## cortical_surface_area      ✔    ✔    ✖    ✔    ✔  </span></span>
<span><span class="co">## subcortical_volume         ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## household_income           ✔    ✔    ✔    ✖    ✔  </span></span>
<span><span class="co">## pubertal_status            ✔    ✔    ✔    ✔    ✔</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Printed as a regular data frame</span></span>
<span><span class="va">sc</span><span class="op">$</span><span class="st">"settings_df"</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   solution alpha  k  t snf_scheme clust_alg cnt_dist dsc_dist ord_dist cat_dist</span></span>
<span><span class="co">## 1        1   0.6 39 20          1         2        1        1        1        1</span></span>
<span><span class="co">## 2        2   0.8 75 20          2         2        1        1        1        1</span></span>
<span><span class="co">## 3        3   0.4 51 20          2         2        1        1        1        1</span></span>
<span><span class="co">## 4        4   0.6 77 20          1         2        1        1        1        1</span></span>
<span><span class="co">## 5        5   0.6 25 20          3         2        1        1        1        1</span></span>
<span><span class="co">##   mix_dist inc_cortical_thickness inc_cortical_surface_area</span></span>
<span><span class="co">## 1        1                      1                         1</span></span>
<span><span class="co">## 2        1                      1                         1</span></span>
<span><span class="co">## 3        1                      1                         0</span></span>
<span><span class="co">## 4        1                      1                         1</span></span>
<span><span class="co">## 5        1                      0                         1</span></span>
<span><span class="co">##   inc_subcortical_volume inc_household_income inc_pubertal_status</span></span>
<span><span class="co">## 1                      1                    1                   1</span></span>
<span><span class="co">## 2                      1                    1                   1</span></span>
<span><span class="co">## 3                      1                    1                   1</span></span>
<span><span class="co">## 4                      1                    0                   1</span></span>
<span><span class="co">## 5                      1                    1                   1</span></span></code></pre>
<p>The columns in a <code>settings_df</code> class object include:</p>
<ul>
<li>
<code>solution</code>: A label to keep track of each generated
cluster solution.</li>
<li>
<code>alpha</code>: The alpha (also referred to as sigma or eta in
the original SNF paper) hyperparameter in SNF. This hyperparameter plays
a role in converting distance matrices into similarity matrices. The
process by which <code><a href="https://rdrr.io/pkg/SNFtool/man/affinityMatrix.html" class="external-link">SNFtool::affinityMatrix()</a></code> does this
conversion essentially involves plugging the distance value as the
x-coordinate of a normal distribution and pulling out the density at
that point as the similarity. The thickness of the normal distribution
is regulated by alpha, where a larger alpha leads to a broader normal
distribution and a greater sensitivity to discriminating distances.</li>
<li>
<code>k</code>: The k (nearest neighbours) hyperparameter in the
distance matrix to similarity matrix conversion as well as in similarity
network fusion. In the distance matrix to similarity matrix conversion
(<code><a href="https://rdrr.io/pkg/SNFtool/man/affinityMatrix.html" class="external-link">SNFtool::affinityMatrix()</a></code>), k controls how many nearest
neighbours to consider when calculating how similar each observation is
to its nearest neighbours. The closer an observation is to its k nearest
neighbours, the broader the normal distribution that is used for the
distance to similarity conversion. For the similarity network fusion
step (<code><a href="https://rdrr.io/pkg/SNFtool/man/SNF.html" class="external-link">SNFtool::SNF()</a></code>), k controls how intensely all the
matrices should be sparsified before information is passed between them.
With a very small k, say, k = 1, all the values in all the matrices will
be reduced to 0 with the exception of one value between each observation
and that observation’s most similar neighbour.</li>
<li>
<code>t</code>: The T (number of iterations) hyperparameter used in
SNF. A larger <code>t</code> results in more rounds of information
passing between similarity matrices. SNF eventually converges, so
overshooting this value offers no benefit but undershooting can yield
inaccurate results. The original SNF developers recommend leaving this
value at 20.</li>
<li>
<code>snf_scheme</code>: Which SNF “scheme” is being used to convert
the initial provided data frames into a final fused network (more on
this in the <a href="https://branchlab.github.io/metasnf/articles/snf_schemes.html">SNF
schemes vignette</a>).</li>
<li>
<code>clust_alg</code>: Which clustering algorithm function from the
<em>clustering functions list</em> of the config will be applied to the
final fused network. You can learn more about using this parameter in
the <a href="https://branchlab.github.io/metasnf/articles/clustering_algorithms.html">clustering
algorithnms vignette</a>.</li>
<li>Columns ending in <code>dist</code>: Which distance metric function
from the <em>distance functions list</em> of the config will be used for
each of the various types of features in the data list (more on this in
the <a href="https://branchlab.github.io/metasnf/articles/distance_metrics.html">distance
metrics vignette</a>).</li>
<li>Columns starting with <code>inc</code>: Whether or not the
corresponding data frame will be included (1) or excluded (0) from this
row.</li>
</ul>
<p>By default, the <code>alpha</code> and <code>k</code> hyperparameters
are randomly varied from 0.3 to 0.8 and 10 to 100 respectively based on
suggestions from the original SNF paper. The <code>t</code>
hyperparameter by default stays fixed at 20. The <code>snf_scheme</code>
column varies randomly from 1 to 3, corresponding to each of the three
differente schemes that are available. The <code>clust_alg</code>
randomly varies between 1 and 2 for the two default clustering algoritm
functions: (1) spectral clustering using the eigen-gap heuristic to
calculate the number of clusters and (2) spectral clustering using the
rotation cost heuristic. The distance columns will always be 1 by
default, as there is only one default distance metric function per
variable type: simple Euclidean for anything numeric and Gower’s
distance for anything mixed or categorical.</p>
</div>
<div class="section level3">
<h3 id="the-distance-functions-list">The distance functions list<a class="anchor" aria-label="anchor" href="#the-distance-functions-list"></a>
</h3>
<p>The distance functions list is simply a list of functions capable of
converting a data frame into a distance matrix. Distance functions
within the list are organized based on what type of variable they deal
with: continuous, discrete, ordinal, categorical, or mixed (any
combination of the former 4).</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfl</span> <span class="op">&lt;-</span> <span class="va">sc</span><span class="op">$</span><span class="st">"dist_fns_list"</span></span>
<span></span>
<span><span class="va">dfl</span></span></code></pre></div>
<pre><code><span><span class="co">## Continuous (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Discrete (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Ordinal (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Categorical (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Mixed (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dfl</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "cnt_dist_fns" "dsc_dist_fns" "ord_dist_fns" "cat_dist_fns" "mix_dist_fns"</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfl</span><span class="op">$</span><span class="st">"cnt_dist_fns"</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## function (df, weights_row) </span></span>
<span><span class="co">## {</span></span>
<span><span class="co">##     weights &lt;- diag(weights_row, nrow = length(weights_row))</span></span>
<span><span class="co">##     weighted_df &lt;- as.matrix(df) %*% weights</span></span>
<span><span class="co">##     distance_matrix &lt;- as.matrix(stats::dist(weighted_df, method = "euclidean"))</span></span>
<span><span class="co">##     return(distance_matrix)</span></span>
<span><span class="co">## }</span></span>
<span><span class="co">## &lt;bytecode: 0x563c03876f68&gt;</span></span>
<span><span class="co">## &lt;environment: namespace:metasnf&gt;</span></span></code></pre>
<p>You can learn more about customizing distance metrics in the <a href="https://branchlab.github.io/metasnf/articles/distance_metrics.html">distance
metrics vignette</a>.</p>
</div>
<div class="section level3">
<h3 id="the-clustering-functions-list">The clustering functions list<a class="anchor" aria-label="anchor" href="#the-clustering-functions-list"></a>
</h3>
<p>The clustering functions list is similarly a list of functions
capable of converting a similarity matrix into a cluster solution
(numeric vector).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfl</span> <span class="op">&lt;-</span> <span class="va">sc</span><span class="op">$</span><span class="st">"clust_fns_list"</span></span>
<span></span>
<span><span class="va">cfl</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] spectral_eigen</span></span>
<span><span class="co">## [2] spectral_rot</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cfl</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "spectral_eigen" "spectral_rot"</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfl</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## function (similarity_matrix) </span></span>
<span><span class="co">## {</span></span>
<span><span class="co">##     estimated_n &lt;- estimate_nclust_given_graph(W = similarity_matrix, </span></span>
<span><span class="co">##         NUMC = 2:10)</span></span>
<span><span class="co">##     nclust_estimate &lt;- estimated_n$`Eigen-gap best`</span></span>
<span><span class="co">##     solution &lt;- SNFtool::spectralClustering(similarity_matrix, </span></span>
<span><span class="co">##         nclust_estimate)</span></span>
<span><span class="co">##     return(solution)</span></span>
<span><span class="co">## }</span></span>
<span><span class="co">## &lt;bytecode: 0x563c03952d98&gt;</span></span>
<span><span class="co">## &lt;environment: namespace:metasnf&gt;</span></span></code></pre>
<p>You can learn more about customizing clustering functions in the <a href="https://branchlab.github.io/metasnf/articles/clustering_algorithms.html">clustering
algorithnms vignette</a>.</p>
</div>
<div class="section level3">
<h3 id="the-weights-matrix">The weights matrix<a class="anchor" aria-label="anchor" href="#the-weights-matrix"></a>
</h3>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wm</span> <span class="op">&lt;-</span> <span class="va">sc</span><span class="op">$</span><span class="st">"weights_matrix"</span></span>
<span></span>
<span><span class="va">wm</span></span></code></pre></div>
<pre><code><span><span class="co">## Weights defined for 5 cluster solutions.</span></span>
<span><span class="co">## $ mrisdp_1 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## $ mrisdp_2 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## $ mrisdp_3 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## $ mrisdp_4 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## $ mrisdp_5 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## …and 329 more features.</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">wm</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"matrix"</span></span>
<span></span>
<span><span class="va">wm</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##      mrisdp_1 mrisdp_2 mrisdp_3 mrisdp_4 mrisdp_5</span></span>
<span><span class="co">## [1,]        1        1        1        1        1</span></span>
<span><span class="co">## [2,]        1        1        1        1        1</span></span>
<span><span class="co">## [3,]        1        1        1        1        1</span></span>
<span><span class="co">## [4,]        1        1        1        1        1</span></span>
<span><span class="co">## [5,]        1        1        1        1        1</span></span></code></pre>
<p>There’s one row in the weights matrix corresponding to every row in
the settings data frame and one column for every feature in the data
list. By default, all the weights are set to 1, so no weighting
occurs.</p>
</div>
</div>
<div class="section level2">
<h2 id="customizing-an-snf-config">Customizing an SNF config<a class="anchor" aria-label="anchor" href="#customizing-an-snf-config"></a>
</h2>
<p>When not specifying any parameters beyond the number of rows that are
created, the function will randomly vary the values in the matrix.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Through minimums and maximums</span></span>
<span><span class="va">sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/snf_config.html">snf_config</a></span><span class="op">(</span></span>
<span>    <span class="va">dl</span>,</span>
<span>    n_solutions <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ℹ No distance functions specified. Using defaults.</span></span></code></pre>
<pre><code><span><span class="co">## ℹ No clustering functions specified. Using defaults.</span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc</span></span></code></pre></div>
<pre><code><span><span class="co">## Settings Data Frame:</span></span>
<span><span class="co">##                            1    2    3    4    5    6    7    8    9   10</span></span>
<span><span class="co">## SNF hyperparameters:</span></span>
<span><span class="co">## alpha                    0.6  0.8  0.3  0.7  0.7  0.8  0.6  0.7  0.8  0.3</span></span>
<span><span class="co">## k                         27   84   50   57   16   80   65   32   95   56  </span></span>
<span><span class="co">## t                         20   20   20   20   20   20   20   20   20   20  </span></span>
<span><span class="co">## SNF scheme:</span></span>
<span><span class="co">##                            2    2    3    3    1    3    2    1    3    2  </span></span>
<span><span class="co">## Clustering functions:</span></span>
<span><span class="co">##                            2    1    1    1    1    1    1    1    1    2  </span></span>
<span><span class="co">## Distance functions:</span></span>
<span><span class="co">## CNT                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## DSC                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## ORD                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## CAT                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## MIX                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## Component dropout:</span></span>
<span><span class="co">## cortical_thickness         ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## cortical_surface_area      ✔    ✔    ✔    ✔    ✔    ✖    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## subcortical_volume         ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## household_income           ✔    ✔    ✔    ✖    ✔    ✔    ✔    ✖    ✔    ✔  </span></span>
<span><span class="co">## pubertal_status            ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## …and settings defined to create 90 more cluster solutions.</span></span>
<span><span class="co">## Distance Functions List:</span></span>
<span><span class="co">## Continuous (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Discrete (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Ordinal (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Categorical (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Mixed (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Clustering Functions List:</span></span>
<span><span class="co">## [1] spectral_eigen</span></span>
<span><span class="co">## [2] spectral_rot</span></span>
<span><span class="co">## Weights Matrix:</span></span>
<span><span class="co">## Weights defined for 100 cluster solutions.</span></span>
<span><span class="co">## $ mrisdp_1 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_2 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_3 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_4 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_5 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## …and 329 more features.</span></span></code></pre>
<div class="section level3">
<h3 id="alpha-k-and-t">Alpha, k, and t<a class="anchor" aria-label="anchor" href="#alpha-k-and-t"></a>
</h3>
<p>You can control any of these parameters either by providing a vector
of values you’d like to randomly sample from or by specifying a minimum
and maximum range.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Through minimums and maximums</span></span>
<span><span class="va">sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/snf_config.html">snf_config</a></span><span class="op">(</span></span>
<span>    <span class="va">dl</span>,</span>
<span>    n_solutions <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    min_k <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    max_k <span class="op">=</span> <span class="fl">60</span>,</span>
<span>    min_alpha <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>    max_alpha <span class="op">=</span> <span class="fl">0.8</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ℹ No distance functions specified. Using defaults.</span></span></code></pre>
<pre><code><span><span class="co">## ℹ No clustering functions specified. Using defaults.</span></span></code></pre>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Through specific value sampling</span></span>
<span><span class="va">sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/snf_config.html">snf_config</a></span><span class="op">(</span></span>
<span>    <span class="va">dl</span>,</span>
<span>    n_solutions <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    k_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">25</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>    alpha_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.8</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ℹ No distance functions specified. Using defaults.</span></span>
<span><span class="co">## ℹ No clustering functions specified. Using defaults.</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="inclusion-columns-and-data-frame-dropout">Inclusion columns and data frame dropout<a class="anchor" aria-label="anchor" href="#inclusion-columns-and-data-frame-dropout"></a>
</h3>
<p>Bounds on the number of input data frames removed as well as the way
in which the number removed is chosen can be controlled.</p>
<p>By default, the <code>settings_df</code> generated during the call to
<code><a href="../reference/snf_config.html">snf_config()</a></code> will pick a random value between 0 (printed as
a red X) and 1 (printed as a green checkmark) less than the total number
of available data frames in the data list based on an exponential
probability distribution. The exponential distribution makes it so that
it is very likely that a small number of data frames will be dropped and
much less likely that a large number of data frames will be dropped.</p>
<p>You can control the distribution by changing the
<code>dropout_dist</code> value to “uniform” (which will result in a
much higher number of data frames being dropped on average) or “none”
(which will result in no data frames being dropped).</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Exponential dropping</span></span>
<span><span class="va">sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/snf_config.html">snf_config</a></span><span class="op">(</span></span>
<span>    <span class="va">dl</span>,</span>
<span>    n_solutions <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    dropout_dist <span class="op">=</span> <span class="st">"exponential"</span> <span class="co"># the default behaviour</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ℹ No distance functions specified. Using defaults.</span></span></code></pre>
<pre><code><span><span class="co">## ℹ No clustering functions specified. Using defaults.</span></span></code></pre>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc</span></span></code></pre></div>
<pre><code><span><span class="co">## Settings Data Frame:</span></span>
<span><span class="co">##                            1    2    3    4    5    6    7    8    9   10</span></span>
<span><span class="co">## SNF hyperparameters:</span></span>
<span><span class="co">## alpha                    0.4  0.7  0.5  0.8  0.5  0.4  0.8  0.3  0.4  0.5</span></span>
<span><span class="co">## k                         46   64   27   33   74   32   85   63   10   17  </span></span>
<span><span class="co">## t                         20   20   20   20   20   20   20   20   20   20  </span></span>
<span><span class="co">## SNF scheme:</span></span>
<span><span class="co">##                            2    2    1    2    1    1    3    3    1    3  </span></span>
<span><span class="co">## Clustering functions:</span></span>
<span><span class="co">##                            2    2    1    1    1    2    2    2    1    1  </span></span>
<span><span class="co">## Distance functions:</span></span>
<span><span class="co">## CNT                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## DSC                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## ORD                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## CAT                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## MIX                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## Component dropout:</span></span>
<span><span class="co">## cortical_thickness         ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## cortical_surface_area      ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## subcortical_volume         ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## household_income           ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## pubertal_status            ✔    ✔    ✔    ✖    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## …and settings defined to create 10 more cluster solutions.</span></span>
<span><span class="co">## Distance Functions List:</span></span>
<span><span class="co">## Continuous (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Discrete (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Ordinal (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Categorical (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Mixed (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Clustering Functions List:</span></span>
<span><span class="co">## [1] spectral_eigen</span></span>
<span><span class="co">## [2] spectral_rot</span></span>
<span><span class="co">## Weights Matrix:</span></span>
<span><span class="co">## Weights defined for 20 cluster solutions.</span></span>
<span><span class="co">## $ mrisdp_1 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_2 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_3 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_4 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_5 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## …and 329 more features.</span></span></code></pre>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Uniform dropping</span></span>
<span><span class="va">sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/snf_config.html">snf_config</a></span><span class="op">(</span></span>
<span>    <span class="va">dl</span>,</span>
<span>    n_solutions <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    dropout_dist <span class="op">=</span> <span class="st">"uniform"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ℹ No distance functions specified. Using defaults.</span></span>
<span><span class="co">## ℹ No clustering functions specified. Using defaults.</span></span></code></pre>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc</span></span></code></pre></div>
<pre><code><span><span class="co">## Settings Data Frame:</span></span>
<span><span class="co">##                            1    2    3    4    5    6    7    8    9   10</span></span>
<span><span class="co">## SNF hyperparameters:</span></span>
<span><span class="co">## alpha                    0.4  0.5  0.4  0.8  0.8  0.3  0.5  0.4  0.6  0.3</span></span>
<span><span class="co">## k                         23   68   14   50   91   61   95   61   86   26  </span></span>
<span><span class="co">## t                         20   20   20   20   20   20   20   20   20   20  </span></span>
<span><span class="co">## SNF scheme:</span></span>
<span><span class="co">##                            2    3    1    3    2    2    3    2    1    2  </span></span>
<span><span class="co">## Clustering functions:</span></span>
<span><span class="co">##                            2    1    1    2    2    1    1    2    1    1  </span></span>
<span><span class="co">## Distance functions:</span></span>
<span><span class="co">## CNT                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## DSC                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## ORD                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## CAT                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## MIX                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## Component dropout:</span></span>
<span><span class="co">## cortical_thickness         ✔    ✖    ✔    ✖    ✔    ✔    ✖    ✖    ✔    ✔  </span></span>
<span><span class="co">## cortical_surface_area      ✔    ✔    ✔    ✖    ✖    ✔    ✖    ✔    ✔    ✔  </span></span>
<span><span class="co">## subcortical_volume         ✔    ✖    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## household_income           ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## pubertal_status            ✔    ✖    ✔    ✔    ✔    ✔    ✔    ✖    ✔    ✔  </span></span>
<span><span class="co">## …and settings defined to create 10 more cluster solutions.</span></span>
<span><span class="co">## Distance Functions List:</span></span>
<span><span class="co">## Continuous (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Discrete (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Ordinal (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Categorical (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Mixed (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Clustering Functions List:</span></span>
<span><span class="co">## [1] spectral_eigen</span></span>
<span><span class="co">## [2] spectral_rot</span></span>
<span><span class="co">## Weights Matrix:</span></span>
<span><span class="co">## Weights defined for 20 cluster solutions.</span></span>
<span><span class="co">## $ mrisdp_1 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_2 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_3 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_4 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_5 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## …and 329 more features.</span></span></code></pre>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># No dropping</span></span>
<span><span class="va">sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/snf_config.html">snf_config</a></span><span class="op">(</span></span>
<span>    <span class="va">dl</span>,</span>
<span>    n_solutions <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    dropout_dist <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ℹ No distance functions specified. Using defaults.</span></span>
<span><span class="co">## ℹ No clustering functions specified. Using defaults.</span></span></code></pre>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc</span></span></code></pre></div>
<pre><code><span><span class="co">## Settings Data Frame:</span></span>
<span><span class="co">##                            1    2    3    4    5    6    7    8    9   10</span></span>
<span><span class="co">## SNF hyperparameters:</span></span>
<span><span class="co">## alpha                    0.8  0.4  0.8  0.4  0.7  0.6  0.8  0.4  0.3  0.7</span></span>
<span><span class="co">## k                         80   53   27   67   63   11   53   14   33   27  </span></span>
<span><span class="co">## t                         20   20   20   20   20   20   20   20   20   20  </span></span>
<span><span class="co">## SNF scheme:</span></span>
<span><span class="co">##                            1    2    1    1    1    3    2    2    1    2  </span></span>
<span><span class="co">## Clustering functions:</span></span>
<span><span class="co">##                            1    2    2    1    2    1    2    1    2    2  </span></span>
<span><span class="co">## Distance functions:</span></span>
<span><span class="co">## CNT                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## DSC                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## ORD                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## CAT                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## MIX                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## Component dropout:</span></span>
<span><span class="co">## cortical_thickness         ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## cortical_surface_area      ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## subcortical_volume         ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## household_income           ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## pubertal_status            ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## …and settings defined to create 10 more cluster solutions.</span></span>
<span><span class="co">## Distance Functions List:</span></span>
<span><span class="co">## Continuous (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Discrete (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Ordinal (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Categorical (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Mixed (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Clustering Functions List:</span></span>
<span><span class="co">## [1] spectral_eigen</span></span>
<span><span class="co">## [2] spectral_rot</span></span>
<span><span class="co">## Weights Matrix:</span></span>
<span><span class="co">## Weights defined for 20 cluster solutions.</span></span>
<span><span class="co">## $ mrisdp_1 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_2 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_3 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_4 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_5 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## …and 329 more features.</span></span></code></pre>
<p>The bounds on the number of data frames that can be dropped can be
controlled using the <code>min_removed_inputs</code> and
<code>max_removed_inputs</code>:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/snf_config.html">snf_config</a></span><span class="op">(</span></span>
<span>    <span class="va">dl</span>,</span>
<span>    n_solutions <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    min_removed_inputs <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ℹ No distance functions specified. Using defaults.</span></span></code></pre>
<pre><code><span><span class="co">## ℹ No clustering functions specified. Using defaults.</span></span></code></pre>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># No row will exclude fewer than 3 data frames during SNF</span></span>
<span><span class="va">sc</span></span></code></pre></div>
<pre><code><span><span class="co">## Settings Data Frame:</span></span>
<span><span class="co">##                            1    2    3    4    5    6    7    8    9   10</span></span>
<span><span class="co">## SNF hyperparameters:</span></span>
<span><span class="co">## alpha                    0.5  0.7  0.8  0.3  0.6  0.4  0.4  0.7  0.3  0.3</span></span>
<span><span class="co">## k                         82   44   24   56   96   10   94   27   34   61  </span></span>
<span><span class="co">## t                         20   20   20   20   20   20   20   20   20   20  </span></span>
<span><span class="co">## SNF scheme:</span></span>
<span><span class="co">##                            1    1    1    2    2    3    2    1    2    2  </span></span>
<span><span class="co">## Clustering functions:</span></span>
<span><span class="co">##                            1    2    2    1    1    1    2    1    1    1  </span></span>
<span><span class="co">## Distance functions:</span></span>
<span><span class="co">## CNT                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## DSC                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## ORD                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## CAT                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## MIX                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## Component dropout:</span></span>
<span><span class="co">## cortical_thickness         ✖    ✔    ✖    ✖    ✖    ✖    ✖    ✔    ✔    ✖  </span></span>
<span><span class="co">## cortical_surface_area      ✖    ✖    ✔    ✖    ✖    ✔    ✖    ✔    ✖    ✔  </span></span>
<span><span class="co">## subcortical_volume         ✔    ✖    ✖    ✔    ✔    ✖    ✔    ✖    ✔    ✖  </span></span>
<span><span class="co">## household_income           ✔    ✖    ✖    ✔    ✔    ✖    ✔    ✖    ✖    ✖  </span></span>
<span><span class="co">## pubertal_status            ✖    ✔    ✔    ✖    ✖    ✔    ✖    ✖    ✖    ✔  </span></span>
<span><span class="co">## …and settings defined to create 10 more cluster solutions.</span></span>
<span><span class="co">## Distance Functions List:</span></span>
<span><span class="co">## Continuous (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Discrete (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Ordinal (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Categorical (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Mixed (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Clustering Functions List:</span></span>
<span><span class="co">## [1] spectral_eigen</span></span>
<span><span class="co">## [2] spectral_rot</span></span>
<span><span class="co">## Weights Matrix:</span></span>
<span><span class="co">## Weights defined for 20 cluster solutions.</span></span>
<span><span class="co">## $ mrisdp_1 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_2 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_3 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_4 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## $ mrisdp_5 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… </span></span>
<span><span class="co">## …and 329 more features.</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="grid-searching">Grid searching<a class="anchor" aria-label="anchor" href="#grid-searching"></a>
</h2>
<p>If you are interested in grid searching over perhaps just a specific
set of alpha and k values, you may want to consider varying those
parameters and keeping everything else fixed:</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/snf_config.html">snf_config</a></span><span class="op">(</span></span>
<span>    <span class="va">dl</span>,</span>
<span>    n_solutions <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    alpha_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.8</span><span class="op">)</span>,</span>
<span>    k_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">40</span>, <span class="fl">60</span><span class="op">)</span>,</span>
<span>    dropout_dist <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ℹ No distance functions specified. Using defaults.</span></span></code></pre>
<pre><code><span><span class="co">## ℹ No clustering functions specified. Using defaults.</span></span></code></pre>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc</span></span></code></pre></div>
<pre><code><span><span class="co">## Settings Data Frame:</span></span>
<span><span class="co">##                            1    2    3    4    5    6    7    8    9   10</span></span>
<span><span class="co">## SNF hyperparameters:</span></span>
<span><span class="co">## alpha                    0.8  0.5  0.3  0.8  0.3  0.3  0.3  0.3  0.8  0.3</span></span>
<span><span class="co">## k                         40   20   40   40   60   40   20   20   20   40  </span></span>
<span><span class="co">## t                         20   20   20   20   20   20   20   20   20   20  </span></span>
<span><span class="co">## SNF scheme:</span></span>
<span><span class="co">##                            3    3    3    3    2    2    3    2    2    2  </span></span>
<span><span class="co">## Clustering functions:</span></span>
<span><span class="co">##                            2    2    2    1    1    1    1    1    2    2  </span></span>
<span><span class="co">## Distance functions:</span></span>
<span><span class="co">## CNT                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## DSC                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## ORD                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## CAT                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## MIX                        1    1    1    1    1    1    1    1    1    1  </span></span>
<span><span class="co">## Component dropout:</span></span>
<span><span class="co">## cortical_thickness         ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## cortical_surface_area      ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## subcortical_volume         ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## household_income           ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## pubertal_status            ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔    ✔  </span></span>
<span><span class="co">## Distance Functions List:</span></span>
<span><span class="co">## Continuous (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Discrete (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Ordinal (1):</span></span>
<span><span class="co">## [1] euclidean_distance</span></span>
<span><span class="co">## Categorical (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Mixed (1):</span></span>
<span><span class="co">## [1] gower_distance</span></span>
<span><span class="co">## Clustering Functions List:</span></span>
<span><span class="co">## [1] spectral_eigen</span></span>
<span><span class="co">## [2] spectral_rot</span></span>
<span><span class="co">## Weights Matrix:</span></span>
<span><span class="co">## Weights defined for 10 cluster solutions.</span></span>
<span><span class="co">## $ mrisdp_1 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## $ mrisdp_2 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## $ mrisdp_3 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## $ mrisdp_4 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## $ mrisdp_5 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 </span></span>
<span><span class="co">## …and 329 more features.</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="assembling-an-snf-config-in-pieces">Assembling an SNF config in pieces<a class="anchor" aria-label="anchor" href="#assembling-an-snf-config-in-pieces"></a>
</h2>
<p>Rather than varying everything equally all at once, you may be
interested in looking at “chunks” of solution spaces that are based on
distinct SNF configs. For example, you may want to look at 25 solutions
generated with k = 50 and look at another 25 solutions generated with k
= 80. You can build two separate SNF configs and join them using the
<code><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge()</a></code> function.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">sc_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/snf_config.html">snf_config</a></span><span class="op">(</span></span>
<span>    <span class="va">dl</span>,</span>
<span>    n_solutions <span class="op">=</span> <span class="fl">25</span>,</span>
<span>    k_values <span class="op">=</span> <span class="fl">50</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ℹ No distance functions specified. Using defaults.</span></span></code></pre>
<pre><code><span><span class="co">## ℹ No clustering functions specified. Using defaults.</span></span></code></pre>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/snf_config.html">snf_config</a></span><span class="op">(</span></span>
<span>    <span class="va">dl</span>,</span>
<span>    n_solutions <span class="op">=</span> <span class="fl">25</span>,</span>
<span>    k_values <span class="op">=</span> <span class="fl">80</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ℹ No distance functions specified. Using defaults.</span></span>
<span><span class="co">## ℹ No clustering functions specified. Using defaults.</span></span></code></pre>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">full_sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">sc_1</span>, <span class="va">sc_2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="settings_df-building-failed-to-converge">“<code>settings_df</code> building failed to converge”<a class="anchor" aria-label="anchor" href="#settings_df-building-failed-to-converge"></a>
</h2>
<p><code><a href="../reference/snf_config.html">snf_config()</a></code> will never build duplicate rows. A
consequence of this is that if you request a very large number of rows
over a very small range of possible values to vary over, it will be
impossible for the matrix to be built. For example, there’s no way to
generate 10 unique rows when the only varying parameter is which of two
clustering algorithms is used - only 2 rows could ever be created. If
you encounter the error “Matrix building failed”, try to generate fewer
rows or to be a little less strict with what values are allowed.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Prashanth S Velayudhan, Xiaoqiao Xu, Prajkta Kallurkar, Ana Patricia Balbon, Maria T Secara, Adam Taback, Denise Sabac, Nicholas Chan, Shihao Ma, Bo Wang, Daniel Felsky, Stephanie H Ameis, Brian Cox, Colin Hawco, Lauren Erdman, Anne L Wheeler.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
