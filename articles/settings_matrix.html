<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="metasnf">
<title>The Settings Matrix • metasnf</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="The Settings Matrix">
<meta property="og:description" content="metasnf">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">metasnf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/a_less_simple_example.html">A Less Simple Example</a>
    <a class="dropdown-item" href="../articles/a_simple_example.html">A Simple Example</a>
    <a class="dropdown-item" href="../articles/alluvial_plots.html">Alluvial Plots</a>
    <a class="dropdown-item" href="../articles/distance_metrics.html">Distance Metrics</a>
    <a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a>
    <a class="dropdown-item" href="../articles/manhattan_plots.html">Manhattan Plots</a>
    <a class="dropdown-item" href="../articles/settings_matrix.html">The Settings Matrix</a>
    <a class="dropdown-item" href="../articles/similarity_matrix_heatmap.html">Plotting Similarity Matrices</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>The Settings Matrix</h1>
            
      
      
      <div class="d-none name"><code>settings_matrix.Rmd</code></div>
    </div>

    
    
<p>This vignette outlines the main functionality of the
<code>generate_settings_matrix</code> function.</p>
<div class="section level2">
<h2 id="the-basic-settings_matrix">The basic settings_matrix<a class="anchor" aria-label="anchor" href="#the-basic-settings_matrix"></a>
</h2>
<p>The most minimal settings_matrix can be obtained by providing a
data_list object.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://branchlab.github.io/metasnf/">metasnf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_data_list.html">generate_data_list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">abcd_cort_t</span>, <span class="st">"cortical_thickness"</span>, <span class="st">"neuroimaging"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">abcd_cort_sa</span>, <span class="st">"cortical_surface_area"</span>, <span class="st">"neuroimaging"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">abcd_subc_v</span>, <span class="st">"subcortical_volume"</span>, <span class="st">"neuroimaging"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">abcd_income</span>, <span class="st">"household_income"</span>, <span class="st">"demographics"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">abcd_pubertal</span>, <span class="st">"pubertal_status"</span>, <span class="st">"demographics"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>    uid <span class="op">=</span> <span class="st">"patient"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">settings_matrix</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] row_id                    alpha                    </span></span>
<span><span class="co">##  [3] k                         t                        </span></span>
<span><span class="co">##  [5] snf_scheme                clust_alg                </span></span>
<span><span class="co">##  [7] cont_dist                 disc_dist                </span></span>
<span><span class="co">##  [9] ord_dist                  cat_dist                 </span></span>
<span><span class="co">## [11] mix_dist                  input_wt                 </span></span>
<span><span class="co">## [13] domain_wt                 inc_cortical_thickness   </span></span>
<span><span class="co">## [15] inc_cortical_surface_area inc_subcortical_volume   </span></span>
<span><span class="co">## [17] inc_household_income      inc_pubertal_status      </span></span>
<span><span class="co">## &lt;0 rows&gt; (or 0-length row.names)</span></span></code></pre>
<p>The resulting columns are:</p>
<ul>
<li>
<code>row_id</code>: A label to keep track of which row is
which</li>
<li>
<code>alpha</code>: The alpha (also referred to as sigma or eta)
hyperparameter in SNF</li>
<li>
<code>k</code>: The K (nearest neighbours) hyperparameter in
similarity matrix calculations and SNF</li>
<li>
<code>t</code>: The T (number of iterations) hyperparameter used in
SNF</li>
<li>
<code>snf_scheme</code>: Which SNF “scheme” is being used to convert
the initial provided dataframes into a final fused network (more on this
in the <a href="https://branchlab.github.io/metasnf/articles/a_less_simple_example.html#snf_scheme">appendix
of the “Less Simple Example” vignette</a>)</li>
<li>
<code>clust_alg</code>: Which clustering algorithm will be applied
to the final fused network. By default, this varies between the
pre-provided options of (1) spectral clustering with the number of
clusters determined by the eigen-gap heuristic and (2) the same thing
but using the rotation cost heuristic. You can learn more about using
this parameter in the <a href="https://branchlab.github.io/metasnf/articles/clustering_algorithms.html">clustering
algorithnms vignette</a>.</li>
<li>Columns ending in <code>dist</code>: Which distance metric is being
used for the various types of variables (more on this in the <a href="https://branchlab.github.io/metasnf/articles/distance_metrics.html">distance
metrics vignette</a>)</li>
<li>Columns starting with <code>inc</code>: Whether or not the
corresponding dataframe will be included (1) or excluded (0) from this
row</li>
</ul>
<p>By varying the values in these columns, we can define distinct SNF
pipelines that should give rise to a broader space of possibly patient
subtype solutions. The following sections outline how to use
<code>generate_settings_matrix</code> to build a wide range of settings
that will hopefully help you find a subtyping solution useful for your
purposes.</p>
</div>
<div class="section level2">
<h2 id="adding-random-rows">Adding random rows<a class="anchor" aria-label="anchor" href="#adding-random-rows"></a>
</h2>
<p>When not specifying any parameters beyond the number of rows that are
created, the function will randomly (but sensibly) vary the values in
the matrix.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Through minimums and maximums</span></span>
<span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">100</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">settings_matrix</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   row_id alpha  k  t snf_scheme clust_alg cont_dist disc_dist ord_dist cat_dist</span></span>
<span><span class="co">## 1      1   0.8 98 20          2         1         1         1        1        1</span></span>
<span><span class="co">## 2      2   0.3 68 20          1         1         1         1        1        1</span></span>
<span><span class="co">## 3      3   0.7 52 20          2         1         1         1        1        1</span></span>
<span><span class="co">## 4      4   0.6 66 20          3         2         1         1        1        1</span></span>
<span><span class="co">## 5      5   0.6 52 20          1         2         1         1        1        1</span></span>
<span><span class="co">## 6      6   0.8 80 20          1         1         1         1        1        1</span></span>
<span><span class="co">##   mix_dist input_wt domain_wt inc_cortical_thickness inc_cortical_surface_area</span></span>
<span><span class="co">## 1        1        1         1                      0                         1</span></span>
<span><span class="co">## 2        1        1         1                      1                         1</span></span>
<span><span class="co">## 3        1        1         1                      1                         1</span></span>
<span><span class="co">## 4        1        1         1                      1                         1</span></span>
<span><span class="co">## 5        1        1         1                      1                         1</span></span>
<span><span class="co">## 6        1        1         1                      1                         1</span></span>
<span><span class="co">##   inc_subcortical_volume inc_household_income inc_pubertal_status</span></span>
<span><span class="co">## 1                      1                    1                   1</span></span>
<span><span class="co">## 2                      0                    1                   1</span></span>
<span><span class="co">## 3                      1                    1                   1</span></span>
<span><span class="co">## 4                      1                    1                   1</span></span>
<span><span class="co">## 5                      1                    1                   1</span></span>
<span><span class="co">## 6                      1                    1                   1</span></span></code></pre>
<p>The <code>alpha</code> and <code>k</code> hyperparameters are varied
from 0.3 to 0.8 and 10 to 100 respectively based on suggestion from the
authors of SNF.</p>
<p>The <code>t</code> hyperparameter, which controls how many iterations
of updates occur to the fused network during SNF, stays fixed at 20, by
default. This value (20) has been empirically demonstrated to be
sufficient for achieving convergence of the matrix, and varying it
doesn’t seem to have much relevance to what kinds of cluster solutions
are produced.</p>
<p>The <code>snf_scheme</code> column will vary from 1 to 3, which
outlines the 3 differente schemes that are available.</p>
<p>The <code>clust_alg</code> column will vary randomly between (1)
spectral clustering using the eigen-gap heuristic and (2) spectral
clustering using the rotation cost heuristic by default.</p>
<p>The distance columns will always be 1 by default, as they will just
use the default distance metrics of simple Euclidean for anything
numeric and Gower’s distance for anything mixed or categorical.</p>
<p>Controlling the scheme, the clustering algorithms, and the distance
metrics are discussed in more details in separate vignettes linked to
above. Controlling the remaining options are shown below.</p>
</div>
<div class="section level2">
<h2 id="alpha-k-and-t">Alpha, k, and t<a class="anchor" aria-label="anchor" href="#alpha-k-and-t"></a>
</h2>
<p>You can control any of these parameters either by providing a vector
of values you’d like to randomly sample from or by specifying a minimum
and maximum range.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Through minimums and maximums</span></span>
<span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    min_k <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    max_k <span class="op">=</span> <span class="fl">60</span>,</span>
<span>    min_alpha <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>    max_alpha <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>    min_t <span class="op">=</span> <span class="fl">15</span>,</span>
<span>    max_t <span class="op">=</span> <span class="fl">30</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in add_settings_matrix_rows(settings_matrix = settings_matrix_base, :</span></span>
<span><span class="co">## The original SNF paper recommends a t between 10 to 20. Empirically, setting t</span></span>
<span><span class="co">## above 20 is always sufficient for SNF to converge. This warning is raised</span></span>
<span><span class="co">## anytime a user tries to set a t value smaller than 10 or larger than 20.</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Through specific value sampling</span></span>
<span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    k_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">25</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>    alpha_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.8</span><span class="op">)</span>,</span>
<span>    t_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in add_settings_matrix_rows(settings_matrix = settings_matrix_base, :</span></span>
<span><span class="co">## The original SNF paper recommends a t between 10 to 20. Empirically, setting t</span></span>
<span><span class="co">## above 20 is always sufficient for SNF to converge. This warning is raised</span></span>
<span><span class="co">## anytime a user tries to set a t value smaller than 10 or larger than 20.</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="inclusion-columns">Inclusion columns<a class="anchor" aria-label="anchor" href="#inclusion-columns"></a>
</h2>
<p>Bounds on the number of input dataframes removed as well as the way
in which the number removed is chosen can be controlled.</p>
<p>By default, <code>generate_settings_matrix</code> will pick a random
value between 0 and 1 less than the total number of available dataframes
based on an exponential probability distribution. The exponential
distribution makes it so that it is very likely that a small number of
dataframes will be dropped and much less likely that a large number of
dataframes will be dropped.</p>
<p>You can control the distribution by changing the
<code>dropout_dist</code> value to “uniform” (which will result in a
much higher number of dataframes being dropped on average) or “none”
(which will result in no dataframes being dropped).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Exponential dropping</span></span>
<span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    dropout_dist <span class="op">=</span> <span class="st">"exponential"</span> <span class="co"># the default behaviour</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">settings_matrix</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   row_id alpha  k  t snf_scheme clust_alg cont_dist disc_dist ord_dist cat_dist</span></span>
<span><span class="co">## 1      1   0.3 50 20          1         1         1         1        1        1</span></span>
<span><span class="co">## 2      2   0.7 72 20          1         1         1         1        1        1</span></span>
<span><span class="co">## 3      3   0.8 62 20          3         1         1         1        1        1</span></span>
<span><span class="co">## 4      4   0.5 18 20          2         1         1         1        1        1</span></span>
<span><span class="co">## 5      5   0.8 82 20          1         2         1         1        1        1</span></span>
<span><span class="co">## 6      6   0.4 75 20          3         2         1         1        1        1</span></span>
<span><span class="co">##   mix_dist input_wt domain_wt inc_cortical_thickness inc_cortical_surface_area</span></span>
<span><span class="co">## 1        1        1         1                      1                         0</span></span>
<span><span class="co">## 2        1        1         1                      1                         1</span></span>
<span><span class="co">## 3        1        1         1                      1                         1</span></span>
<span><span class="co">## 4        1        1         1                      1                         1</span></span>
<span><span class="co">## 5        1        1         1                      1                         1</span></span>
<span><span class="co">## 6        1        1         1                      1                         1</span></span>
<span><span class="co">##   inc_subcortical_volume inc_household_income inc_pubertal_status</span></span>
<span><span class="co">## 1                      1                    1                   1</span></span>
<span><span class="co">## 2                      1                    1                   1</span></span>
<span><span class="co">## 3                      1                    1                   1</span></span>
<span><span class="co">## 4                      1                    1                   1</span></span>
<span><span class="co">## 5                      1                    1                   1</span></span>
<span><span class="co">## 6                      1                    1                   1</span></span></code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Uniform dropping</span></span>
<span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    dropout_dist <span class="op">=</span> <span class="st">"uniform"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">settings_matrix</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   row_id alpha  k  t snf_scheme clust_alg cont_dist disc_dist ord_dist cat_dist</span></span>
<span><span class="co">## 1      1   0.8 90 20          3         1         1         1        1        1</span></span>
<span><span class="co">## 2      2   0.6 77 20          3         2         1         1        1        1</span></span>
<span><span class="co">## 3      3   0.7 87 20          2         2         1         1        1        1</span></span>
<span><span class="co">## 4      4   0.7 90 20          2         1         1         1        1        1</span></span>
<span><span class="co">## 5      5   0.8 94 20          3         2         1         1        1        1</span></span>
<span><span class="co">## 6      6   0.8 88 20          2         1         1         1        1        1</span></span>
<span><span class="co">##   mix_dist input_wt domain_wt inc_cortical_thickness inc_cortical_surface_area</span></span>
<span><span class="co">## 1        1        1         1                      0                         0</span></span>
<span><span class="co">## 2        1        1         1                      0                         1</span></span>
<span><span class="co">## 3        1        1         1                      1                         1</span></span>
<span><span class="co">## 4        1        1         1                      1                         1</span></span>
<span><span class="co">## 5        1        1         1                      0                         1</span></span>
<span><span class="co">## 6        1        1         1                      1                         0</span></span>
<span><span class="co">##   inc_subcortical_volume inc_household_income inc_pubertal_status</span></span>
<span><span class="co">## 1                      0                    1                   0</span></span>
<span><span class="co">## 2                      1                    0                   1</span></span>
<span><span class="co">## 3                      1                    1                   0</span></span>
<span><span class="co">## 4                      0                    0                   0</span></span>
<span><span class="co">## 5                      0                    0                   1</span></span>
<span><span class="co">## 6                      1                    0                   0</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># No dropping</span></span>
<span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    dropout_dist <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">settings_matrix</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   row_id alpha  k  t snf_scheme clust_alg cont_dist disc_dist ord_dist cat_dist</span></span>
<span><span class="co">## 1      1   0.7 43 20          1         2         1         1        1        1</span></span>
<span><span class="co">## 2      2   0.4 72 20          3         1         1         1        1        1</span></span>
<span><span class="co">## 3      3   0.6 29 20          1         2         1         1        1        1</span></span>
<span><span class="co">## 4      4   0.4 97 20          2         1         1         1        1        1</span></span>
<span><span class="co">## 5      5   0.5 96 20          2         2         1         1        1        1</span></span>
<span><span class="co">## 6      6   0.6 56 20          1         1         1         1        1        1</span></span>
<span><span class="co">##   mix_dist input_wt domain_wt inc_cortical_thickness inc_cortical_surface_area</span></span>
<span><span class="co">## 1        1        1         1                      1                         1</span></span>
<span><span class="co">## 2        1        1         1                      1                         1</span></span>
<span><span class="co">## 3        1        1         1                      1                         1</span></span>
<span><span class="co">## 4        1        1         1                      1                         1</span></span>
<span><span class="co">## 5        1        1         1                      1                         1</span></span>
<span><span class="co">## 6        1        1         1                      1                         1</span></span>
<span><span class="co">##   inc_subcortical_volume inc_household_income inc_pubertal_status</span></span>
<span><span class="co">## 1                      1                    1                   1</span></span>
<span><span class="co">## 2                      1                    1                   1</span></span>
<span><span class="co">## 3                      1                    1                   1</span></span>
<span><span class="co">## 4                      1                    1                   1</span></span>
<span><span class="co">## 5                      1                    1                   1</span></span>
<span><span class="co">## 6                      1                    1                   1</span></span></code></pre>
<p>The bounds on the number of dataframes that can be dropped can be
controlled using the <code>min_removed_inputs</code> and
<code>max_removed_inputs</code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    min_removed_inputs <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># No row will exclude fewer than 3 dataframes during SNF</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">settings_matrix</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   row_id alpha  k  t snf_scheme clust_alg cont_dist disc_dist ord_dist cat_dist</span></span>
<span><span class="co">## 1      1   0.3 54 20          1         2         1         1        1        1</span></span>
<span><span class="co">## 2      2   0.4 84 20          2         2         1         1        1        1</span></span>
<span><span class="co">## 3      3   0.5 82 20          2         2         1         1        1        1</span></span>
<span><span class="co">## 4      4   0.7 19 20          1         2         1         1        1        1</span></span>
<span><span class="co">## 5      5   0.6 81 20          1         2         1         1        1        1</span></span>
<span><span class="co">## 6      6   0.8 28 20          2         1         1         1        1        1</span></span>
<span><span class="co">##   mix_dist input_wt domain_wt inc_cortical_thickness inc_cortical_surface_area</span></span>
<span><span class="co">## 1        1        1         1                      0                         0</span></span>
<span><span class="co">## 2        1        1         1                      0                         1</span></span>
<span><span class="co">## 3        1        1         1                      1                         0</span></span>
<span><span class="co">## 4        1        1         1                      1                         1</span></span>
<span><span class="co">## 5        1        1         1                      0                         1</span></span>
<span><span class="co">## 6        1        1         1                      1                         0</span></span>
<span><span class="co">##   inc_subcortical_volume inc_household_income inc_pubertal_status</span></span>
<span><span class="co">## 1                      1                    1                   0</span></span>
<span><span class="co">## 2                      0                    1                   0</span></span>
<span><span class="co">## 3                      0                    0                   1</span></span>
<span><span class="co">## 4                      0                    0                   0</span></span>
<span><span class="co">## 5                      1                    0                   0</span></span>
<span><span class="co">## 6                      1                    0                   0</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="grid-searching">Grid searching<a class="anchor" aria-label="anchor" href="#grid-searching"></a>
</h2>
<p>If you are interested in grid searching over perhaps just a specific
set of alpha and k values, you may want to consider varying those
parameters and keeping everything else fixed:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    alpha_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.8</span><span class="op">)</span>,</span>
<span>    k_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">40</span>, <span class="fl">60</span><span class="op">)</span>,</span>
<span>    dropout_dist <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="assembling-a-settings_matrix-in-pieces">Assembling a settings_matrix in pieces<a class="anchor" aria-label="anchor" href="#assembling-a-settings_matrix-in-pieces"></a>
</h2>
<p>Rather than varying everything equally all at once, you may be
interested in looking at “chunks” of solution spaces that are based on
distinct settings matrices.</p>
<p>For example, you may want to look at 100 solutions generated with k =
50 and look at another 100 solutions generated with k = 80. You can
absolutely build two separate settings matrices, but you can also build
up a single matrix in parts using the
<code>add_settings_matrix_rows</code> function:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_settings_matrix.html">generate_settings_matrix</a></span><span class="op">(</span></span>
<span>    <span class="va">data_list</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">50</span>,</span>
<span>    k_values <span class="op">=</span> <span class="fl">50</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">settings_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_settings_matrix_rows.html">add_settings_matrix_rows</a></span><span class="op">(</span></span>
<span>    <span class="va">settings_matrix</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">50</span>,</span>
<span>    k_values <span class="op">=</span> <span class="fl">80</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">settings_matrix</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 100  18</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">settings_matrix</span><span class="op">$</span><span class="st">"k"</span></span></code></pre></div>
<pre><code><span><span class="co">##   [1] 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50</span></span>
<span><span class="co">##  [26] 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50</span></span>
<span><span class="co">##  [51] 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80</span></span>
<span><span class="co">##  [76] 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80 80</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="manual-adjustments">Manual adjustments<a class="anchor" aria-label="anchor" href="#manual-adjustments"></a>
</h2>
<p>Don’t forget that the settings matrix is just a dataframe. You can
always go in and modify things as you wish, but you do risk generating
duplicate or invalid rows that the package functions would have
prevented.</p>
</div>
<div class="section level2">
<h2 id="matrix-building-failed">“Matrix building failed”<a class="anchor" aria-label="anchor" href="#matrix-building-failed"></a>
</h2>
<p><code>generate_settings_matrix</code> will never build duplicate
rows. A consequence of this is that if you request a very large number
of rows over a very small range of possible values to vary over, it will
be impossible for the matrix to be built. For example, there’s no way to
generate 10 unique rows when the only thing allowed to vary is which
clustering algorithm (1 or 2) is used - only 2 rows could ever be
created.</p>
<p>If you encounter the error “Matrix building failed”, try to generate
fewer rows or to be a little less strict with what values are
allowed.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Prashanth Velayudhan, Nicholas Chan, Xiaoqiao Xu, Prajkta Kallurkar, Shihao Ma, Stephanie H Ameis, Ana Patricia Balbon, Adam Taback, Brian Cox, Anna Goldenberg, Bo Wang, Linda Hiraki, Anne L Wheeler, Jasbir Dhaliwal, Colin Hawco, Lauren Erdman.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
